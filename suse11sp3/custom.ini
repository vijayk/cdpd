
[spark2]
build_tool = maven
BUILD_SPARK_SETVERSION_OPTS = ${MVN_CMD} ${MVN_SET_VERSION_CMD} -DnewVersion=${spark2_jar_version} -DgenerateBackupPoms=false
COMMON_BUILD_OPTS = "-Phive -Phive-thriftserver -Pyarn -Phadoop-2.7 -Phwx-common -Dhbase.profile=hadoop2 -Drepo.id=${NEXUS_DEPLOY_REPO_ID} -Dinternal.maven.repo=${NEXUS_REPO_URL} -Pbigtop-dist -Dsurefire.timeout=9600 ${MAVEN_TEST_OPTS}"
setversion_cmd = ${MVN_CMD} ${MVN_SET_VERSION_CMD} -DnewVersion=${spark2_jar_version}
deploy_cmd = ${COMMON_BUILD_OPTS} package deploy -DskipTests
package_count = 5

   [[PASSTHROUGH_ENV]]
        HADOOP_VERSION=${hadoop_jar_version}
        SPARK2_VERSION=${spark2_jar_version}
    [[artifacts]]
        artifact_1 = spark-${spark2_jar_version}-bin-${hadoop_jar_version}.tgz

    [[install_cmd]]
        cmd_1 = dev/make-distribution.sh --tgz ${COMMON_BUILD_OPTS} -Dskip=true

    [[test_cmd]]
        cmd_1 = -fae ${COMMON_BUILD_OPTS} test

    [[xml-replace]]
        REPLACE_1 = 'flume.version', ${flume_jar_version}, pom.xml
        REPLACE_2 = 'hadoop.version', ${hadoop_jar_version}, pom.xml
        REPLACE_3 = 'hbase.version', ${hbase_jar_version}, pom.xml
        REPLACE_4 = 'protobuf.version', ${protobuf_version}, pom.xml
        REPLACE_5 = 'zookeeper.version', ${zookeeper_jar_version}, pom.xml
        REPLACE_6 = 'kafka.version', ${kafka_jar_version}, pom.xml
